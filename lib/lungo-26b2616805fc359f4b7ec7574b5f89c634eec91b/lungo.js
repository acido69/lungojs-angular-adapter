/*
   http://www.github.com/tapquo/lungo/blob/master/LICENSE.txt
 @version   2.0
 @link      https://github.com/TapQuo/Lungo.js

 @author   Javier Jimenez Villar <javi@tapquo.com> || @soyjavi
*/
var Lungo=Lungo||{};Lungo.VERSION="2.0";Lungo.Attributes||(Lungo.Attributes={});Lungo.Element||(Lungo.Element={});Lungo.Data||(Lungo.Data={});Lungo.Sugar||(Lungo.Sugar={});Lungo.View||(Lungo.View={});Lungo.Boot||(Lungo.Boot={});Lungo.Device||(Lungo.Device={});Lungo.ready||(Lungo.ready=Quo().ready);Lungo.init=function(b){b&&b.resources&&Lungo.Resource.load(b.resources);Lungo.Boot.Events.init();Lungo.Boot.Data.init();Lungo.Boot.Layout.init()};Lungo.Core=function(b,i){var a=Array.prototype,l=function(c,f){return i.isOwnProperty(c,f)},g=function(c){return i.toType(c)},m=function(c){return a.slice.call(c,0)};return{log:function(c,f){b.Core.isMobile()||console[c===1?"log":c===2?"warn":"error"](f)},execute:function(){var c=m(arguments),f=c.shift();g(f)==="function"&&f.apply(null,c)},bind:function(c,f){return function(){return f.apply(c,m(arguments))}},mix:function(){for(var c=c||{},f=0,h=arguments.length;f<h;f++){var d=arguments[f],k;for(k in d)if(l(d,
k))c[k]=d[k]}return c},isOwnProperty:l,toType:g,toArray:m,isMobile:function(){return i.isMobile()},environment:function(){return i.environment()},orderByProperty:function(c,f,h){var d=h==="desc"?-1:1;return c.sort(function(k,n){return k[f]<n[f]?-d:k[f]>n[f]?d:0})},parseUrl:function(c){var f=c.lastIndexOf("#");if(f>0)c=c.substring(f);else if(f===-1)c="#"+c;return c},findByProperty:function(c,f,h){for(var d=null,k=0,n=c.length;k<n;k++){var p=c[k];if(p[f]==h){d=p;break}}return d}}}(Lungo,Quo);Lungo.dom=function(b){return $$(b)};Lungo.Service=function(b,i){var a={MINUTE:"minute",HOUR:"hour",DAY:"day"},l=function(g,m){var c=false,f=b.Data.Storage.persistent("lungojs_service_cache");if(f){f=f[g];c=(new Date).getTime();f=(new Date(f)).getTime();var h=c-f;c=m.split(" ");f=c[1];h=h/1E3/60;if(f.indexOf(a.HOUR)>=0)h/=60;else if(f.indexOf(a.DAY)>=0)h=h/60/24;c=h<c[0]?true:false}return c};return{get:function(g,m,c,f){return i.get(g,m,c,f)},post:function(g,m,c,f){return i.post(g,m,c,f)},json:function(g,m,c){return i.json(g,m,c)},cache:function(g,
m,c,f,h){var d=g+i.serializeParameters(m);if(l(d,c)){if(g=b.Data.Storage.persistent(d))return f.call(f,g)}else return i.get(g,m,function(k){var n=b.Data.Storage.persistent("lungojs_service_cache")||{};n[d]=new Date;b.Data.Storage.persistent("lungojs_service_cache",n);b.Data.Storage.persistent(d,k);f.call(f,k)},h)},Settings:i.ajaxSettings}}(Lungo,Quo);Lungo.Constants={ELEMENT:{SECTION:"section",ARTICLE:"article",ASIDE:"aside",BODY:"body",DIV:"div",LIST:"<ul></ul>",LI:"li"},QUERY:{LIST_IN_ELEMENT:"article.list, aside.list",ELEMENT_SCROLLABLE:"aside.scroll, article.scroll"},CLASS:{ACTIVE:"active",ASIDE:"aside",SHOW:"show",HIDE:"hide",HIDING:"hiding",RIGHT:"right",LEFT:"left",HORIZONTAL:"horizontal",SMALL:"small"},TRIGGER:{LOAD:"load",UNLOAD:"unload"},TRANSITION:{DURATION:350},ATTRIBUTE:{ID:"id",HREF:"href",TITLE:"title",ARTICLE:"article",CLASS:"class",
WIDTH:"width",HEIGHT:"height",PIXEL:"px",PERCENT:"%",ROUTER:"router",FIRST:"first",LAST:"last",EMPTY:""},BINDING:{START:"{{",END:"}}",KEY:"value",SELECTOR:"{{value}}"},ERROR:{DATABASE:"ERROR: Connecting to Data.Sql.",DATABASE_TRANSACTION:"ERROR: Data.Sql >> ",ROUTER:"ERROR: The target does not exists >>",LOADING_RESOURCE:"ERROR: Loading resource: "}};Lungo.Events=function(b){return{init:function(i){for(event in i){var a=event.indexOf(" ");if(a>0){var l=event.substring(0,a);a=event.substring(a+1);b.dom(a).on(l,i[event])}}}}}(Lungo);Lungo.Notification=function(b,i){var a=[],l=null,g=null,m=b.Constants.BINDING,c={BODY:"body",NOTIFICATION:".notification",MODAL:".notification .window",MODAL_HREF:".notification .window a",WINDOW_CLOSABLE:".notification > [data-action=close], .notification > .error, .notification > .success",CONFIRM_BUTTONS:".notification .confirm a.button"},f={MODAL:"modal",VISIBLE:"visible",SHOW:"show",WORKING:"working",INPUT:"input"},h=function(){g.removeClass("show");setTimeout(function(){l.style("display","none").removeClass("html").removeClass("confirm").removeClass("notify").removeClass("growl")},
150)},d=function(e,j){l.show();g.removeClass(f.SHOW);g.removeClass("error").removeClass("success").removeClass("html").removeClass("growl");g.addClass(j);g.html(e);setTimeout(function(){g.addClass(f.SHOW)},1)},k=function(e,j){e!==i&&e!==0&&setTimeout(function(){h();j&&setTimeout(j,200)},e*1E3)},n=function(e,j,o){j=!j?"&nbsp;":j;return'<span class="icon '+o+'"></span><strong class="text bold">'+e+"</strong><small>"+j+"</small>"},p=function(e,j){return'<a href="#" data-callback="'+j+'" class="button anchor large text thin">'+
e.label+"</a>"};b.dom(c.BODY).append('<div class="notification"><div class="window"></div></div>');l=b.dom(c.NOTIFICATION);g=l.children(".window");(function(){b.dom(c.CONFIRM_BUTTONS).tap(function(){var e=b.dom(this);(e=a[e.data("callback")].callback)&&e.call(e);h()});b.dom(c.WINDOW_CLOSABLE).tap(h)})();return{show:function(e,j,o,q){e=e!==i?n(e,null,j):b.Attributes.Data.loading.html.replace(m.START+m.KEY+m.END,"icon white");d(e,"growl");k(o,q)},hide:h,error:function(e,j,o,q,t){d(n(e,j,o),"error");
q&&k(q,t)},success:function(e,j,o,q,t){d(n(e,j,o),"success");q&&k(q,t)},confirm:function(e){a=e;var j=n(e.title,e.description,e.icon);j+=p(e.accept,"accept");j+=p(e.cancel,"cancel");d(j,"confirm")},html:function(e,j){e+=j?'<a href="#" class="button large anchor" data-action="close">Close</a>':"";d(e,"html")}}}(Lungo);Lungo.Fallback=function(b){return{fixPositionInAndroid:function(){env=b.Core.environment();env.isMobile&&env.os.name==="Android"&&env.os.version<"3"?b.dom(document.body).data("position","absolute"):b.dom(document.body).data("position","fixed")}}}(Lungo);Lungo.Resource=function(b,i){var a=b.Constants.ELEMENT,l=b.Constants.ERROR,g=function(c){try{var f=m(c);b.Core.toType(f)==="string"&&b.dom(a.BODY).append(f)}catch(h){b.Core.log(3,h.message)}},m=function(c){return i.ajax({url:c,async:false,dataType:"html",error:function(){console.error(l.LOADING_RESOURCE+c)}})};return{load:function(c){if(b.Core.toType(c)==="array")for(var f=0,h=c.length;f<h;f++)g(c[f]);else g(c)}}}(Lungo,Quo);(function(b,i){var a=b.document,l=a.documentElement,g="ontouchmove"in a,m="WebkitOverflowScrolling"in l.style||!g&&b.screen.width>1200||function(){var e=b.navigator.userAgent,j=e.match(/AppleWebKit\/([0-9]+)/),o=j&&j[1],q=j&&o>=534;return e.match(/Android ([0-9]+)/)&&RegExp.$1>=3&&q||e.match(/ Version\/([0-9]+)/)&&RegExp.$1>=0&&b.blackberry&&q||e.indexOf(/PlayBook/)>-1&&RegExp.$1>=0&&q||e.match(/Fennec\/([0-9]+)/)&&RegExp.$1>=4||e.match(/wOSBrowser\/([0-9]+)/)&&RegExp.$1>=233&&q||e.match(/NokiaBrowser\/([0-9\.]+)/)&&
parseFloat(RegExp.$1)===7.3&&j&&o>=533}(),c=function(e,j,o,q){return o*((e=e/q-1)*e*e+1)+j},f=false,h,d=function(e,j){var o=0,q=e.scrollLeft,t=e.scrollTop,r={top:"+0",left:"+0",duration:100,easing:b.overthrow.easing},v,w;if(j)for(var z in r)if(j[z]!==i)r[z]=j[z];if(typeof r.left==="string"){r.left=parseFloat(r.left);v=r.left+q}else{v=r.left;r.left-=q}if(typeof r.top==="string"){r.top=parseFloat(r.top);w=r.top+t}else{w=r.top;r.top-=t}h=setInterval(function(){if(o++<r.duration){e.scrollLeft=r.easing(o,
q,r.left,r.duration);e.scrollTop=r.easing(o,t,r.top,r.duration)}else{if(v!==e.scrollLeft)e.scrollLeft=v;if(w!==e.scrollTop)e.scrollTop=w;n()}},1);return{top:w,left:v,duration:r.duration,easing:r.easing}},k=function(e,j){return!j&&e.className&&e.className.indexOf("scroll")>-1&&e||k(e.parentNode)},n=function(){clearInterval(h)},p=function(){if(!f){f=true;if(m||g)l.className+=" scroll-enabled";b.overthrow.forget=function(){l.className=l.className.replace("scroll-enabled","");a.removeEventListener&&a.removeEventListener("touchstart",
z,false);b.overthrow.easing=c;f=false};if(!(m||!g)){var e,j=[],o=[],q,t,r=function(){var s=(j[0]-j[j.length-1])*8,u=(o[0]-o[o.length-1])*8,y=Math.max(Math.abs(u),Math.abs(s))/8;s=(s>0?"+":"")+s;u=(u>0?"+":"")+u;if(!isNaN(y)&&y>0&&(Math.abs(u)>80||Math.abs(s)>80))d(e,{left:u,top:s,duration:y})},v,w=function(s){v=e.querySelectorAll("textarea, input");for(var u=0,y=v.length;u<y;u++)v[u].style.pointerEvents=s},z=function(s){n();j=[];q=null;o=[];t=null;e=k(s.target);if(!(!e||e===l||s.touches.length>1)){w("none");
var u=e.scrollTop,y=e.scrollLeft,H=e.offsetHeight,I=e.offsetWidth,J=s.touches[0].pageY,K=s.touches[0].pageX,L=e.scrollHeight,M=e.scrollWidth,F=function(x){var A=u+J-x.touches[0].pageY,B=y+K-x.touches[0].pageX,D=A>=(j.length?j[0]:0),E=B>=(o.length?o[0]:0);if(A>0&&A<L-H||B>0&&B<M-I)x.preventDefault();else if(a.createEvent){x=e.parentNode||e.touchchild||e;var C;if(x!==e){C=a.createEvent("HTMLEvents");C.initEvent("touchend",true,true);e.dispatchEvent(C);x.touchchild=e;e=x;x.dispatchEvent(s)}}if(q&&D!==
q){j=[];q=null}if(t&&E!==t){o=[];t=null}q=D;t=E;e.scrollTop=A;e.scrollLeft=B;j.unshift(A);o.unshift(B);j.length>3&&j.pop();o.length>3&&o.pop()},G=function(){r();w("auto");setTimeout(function(){w("none")},450);e.removeEventListener("touchmove",F,false);e.removeEventListener("touchend",G,false)};e.addEventListener("touchmove",F,false);e.addEventListener("touchend",G,false)}};a.addEventListener("touchstart",z,false)}}};b.overthrow={set:p,forget:function(){},easing:c,toss:d,intercept:n,closest:k,support:m?
"native":g&&"polyfilled"||"none"};p()})(this);Lungo.Router=function(b){var i=b.Constants.CLASS,a=b.Constants.ELEMENT,l=b.Constants.TRIGGER,g=b.Constants.ATTRIBUTE,m=function(h){h=b.Core.parseUrl(h);var d=b.Element.Cache.section;if(h!=="#"+d.attr("id")?true:false){var k=d.siblings(a.SECTION+h);if(k.length>0){if(target_transition=k.data("transition")){d.data("transition-origin",d.data("transition"));f(d,target_transition)}d.removeClass(i.SHOW).addClass(i.HIDE);k.removeClass(i.HIDE).addClass(i.SHOW);b.Element.Cache.section=k;b.Element.Cache.article=
k.find(a.ARTICLE+"."+i.ACTIVE);b.Router.History.add(h);c(d,k)}}},c=function(h,d){h.trigger(l.UNLOAD);d.trigger(l.LOAD)},f=function(h,d){h.data("transition",d)};return{section:m,article:function(h,d,k){d=b.Core.parseUrl(d);var n=b.Element.Cache.article;if(d!=="#"+n.attr("id")?true:false){m(h);h=b.Element.Cache.section.find(a.ARTICLE+d);if(h.length>0){if(n.parent("section").attr("id")!==h.parent("section").attr("id"))n=b.Element.Cache.section.children(a.ARTICLE);n.removeClass(i.ACTIVE).trigger(l.UNLOAD);
h.addClass(i.ACTIVE).trigger(l.LOAD);b.Element.Cache.article=h;b.View.Article.switchNavItems(d);b.View.Article.switchReferenceItems(d,b.Element.Cache.section);k&&b.View.Article.title(k.data(g.TITLE))}}},aside:function(h,d){d=b.Core.parseUrl(d);b.View.Aside.toggle(d)},back:function(){var h=b.Element.Cache.section;h.removeClass(i.SHOW).addClass(i.HIDING);setTimeout(function(){h.removeClass(i.HIDING)},b.Constants.TRANSITION.DURATION);b.Router.History.removeLast();target=h.siblings(a.SECTION+b.Router.History.current());
f(target,target.data("transition-origin"));target.removeClass(i.HIDE).addClass(i.SHOW);b.Element.Cache.section=target;c(h,target)}}}(Lungo);Lungo.Router.History=function(){var b=[],i=function(){return b[b.length-1]};return{add:function(a){a!==i()&&b.push(a)},current:i,removeLast:function(){b.length-=1}}}();Lungo.View.Article=function(b){var i=b.Constants.CLASS,a=b.Constants.ATTRIBUTE,l={NAVIGATION_ITEM:'a[href][data-router="article"]',REFERENCE_LINK:" a[href][data-article]",TITLE_OF_ARTICLE:"header .title, footer .title",ASIDE_REFERENCE_LIST:"li a.active, li.active"};return{title:function(g){g&&b.Element.Cache.section.find(l.TITLE_OF_ARTICLE).text(g)},switchReferenceItems:function(g,m){g=g.replace("#","");for(var c=m.find(l.REFERENCE_LINK),f=0,h=c.length;f<h;f++){var d=b.dom(c[f]);d.data(a.ARTICLE)===
g?d.show():d.hide()}},switchNavItems:function(g){b.Element.Cache.section.find(l.NAVIGATION_ITEM).removeClass(i.ACTIVE);g='a[href="'+g+'"][data-router="article"]';b.Element.Cache.section.find(g).addClass(i.ACTIVE);if(b.Element.Cache.aside){aside=b.Element.Cache.aside;aside.find(l.ASIDE_REFERENCE_LIST).removeClass(i.ACTIVE);aside.find(g).addClass(i.ACTIVE).parent().addClass(i.ACTIVE)}}}}(Lungo);Lungo.View.Aside=function(b){var i=b.Constants.ELEMENT,a=b.Constants.CLASS,l=b.Constants.ATTRIBUTE,g=function(c){var f=null,h=b.Element.Cache.asides.length;if(h==1){if("#"+b.Element.Cache.asides[0].id==c)f=b.dom(b.Element.Cache.asides[0])}else if(h>1)f=b.Element.Cache.asides.siblings(i.ASIDE+c);return f},m=function(c){c=c.attr(l.CLASS);var f="";if(c){f+=c.indexOf(a.RIGHT)>-1?a.RIGHT+" ":"";f+=c.indexOf(a.SMALL)>-1?a.SMALL+" ":""}return f};return{toggle:function(c){if(aside=g(c))aside.hasClass(a.SHOW)?
b.View.Aside.hide():b.View.Aside.show(aside);aside=null},show:function(c){if(b.Core.toType(c)=="string")c=g(b.Core.parseUrl(c));if(c){b.Element.Cache.aside=c;var f=m(c);c.addClass(a.SHOW);b.Element.Cache.section.addClass(f).addClass(a.ASIDE)}},hide:function(){var c=b.Element.Cache.aside;if(c){b.Element.Cache.section.removeClass(a.ASIDE).removeClass(a.RIGHT).removeClass(a.SMALL);var f=m(c);f&&b.Element.Cache.section.removeClass(f);setTimeout(function(){c.removeClass(a.SHOW);b.Element.Cache.aside=null},
350)}}}}(Lungo);Lungo.Element.Cache={sections:null,section:null,article:null,asides:null,aside:null,navigation:null};Lungo.Element.Carousel=function(b,i){var a={index:0,speed:300,callback:i,container:b,element:b.children[0],slide:undefined,slides:[],slides_length:0,width:0,start:{},isScrolling:undefined,deltaX:0},l=function(){a.slides=a.element.children;a.slides_length=a.slides.length;if(a.slides_length<2)return null;a.width="getBoundingClientRect"in a.container?a.container.getBoundingClientRect().width:a.container.offsetWidth;if(!a.width)return null;a.element.style.width=a.slides.length*a.width+"px";for(var c=
a.slides.length;c--;){var f=a.slides[c];f.style.width=a.width+"px";f.style.display="table-cell";f.style.verticalAlign="top"}g(a.index,0);a.container.style.visibility="visible"},g=function(c,f){var h=a.element.style;if(f==undefined)f=a.speed;h.webkitTransitionDuration=h.MozTransitionDuration=h.msTransitionDuration=h.OTransitionDuration=h.transitionDuration=f+"ms";h.MozTransform=h.webkitTransform="translate3d("+-(c*a.width)+"px,0,0)";h.msTransform=h.OTransform="translateX("+-(c*a.width)+"px)";a.index=
c},m=function(){a.callback&&a.callback.apply(a.callback,[a.index,a.slides[a.index]])};l();a.element.addEventListener("touchstart",function(c){a.start={pageX:c.touches[0].pageX,pageY:c.touches[0].pageY,time:Number(new Date)};a.isScrolling=undefined;a.deltaX=0;a.element.style.MozTransitionDuration=a.element.style.webkitTransitionDuration=0;c.stopPropagation()},false);a.element.addEventListener("touchmove",function(c){if(!(c.touches.length>1||c.scale&&c.scale!==1)){a.deltaX=c.touches[0].pageX-a.start.pageX;
if(typeof a.isScrolling=="undefined")a.isScrolling=!!(a.isScrolling||Math.abs(a.deltaX)<Math.abs(c.touches[0].pageY-a.start.pageY));if(!a.isScrolling){c.preventDefault();a.deltaX/=!a.index&&a.deltaX>0||a.index==a.slides_length-1&&a.deltaX<0?Math.abs(a.deltaX)/a.width+1:1;a.element.style.MozTransform=a.element.style.webkitTransform="translate3d("+(a.deltaX-a.index*a.width)+"px,0,0)";c.stopPropagation()}}},false);a.element.addEventListener("touchend",function(c){var f=Number(new Date)-a.start.time<
250&&Math.abs(a.deltaX)>20||Math.abs(a.deltaX)>a.width/2,h=!a.index&&a.deltaX>0||a.index==a.slides_length-1&&a.deltaX<0;a.isScrolling||g(a.index+(f&&!h?a.deltaX<0?1:-1:0),a.speed);c.stopPropagation()},false);a.element.addEventListener("webkitTransitionEnd",m,false);a.element.addEventListener("msTransitionEnd",m,false);a.element.addEventListener("oTransitionEnd",m,false);a.element.addEventListener("transitionend",m,false);window.addEventListener("resize",l,false);return{prev:function(){a.index&&g(a.index-
1,a.speed)},next:function(){a.index<a.slides_length-1?g(a.index+1,a.speed):g(0,a.speed)},position:function(){return a.index}}};Lungo.Element.count=function(b,i){var a=Lungo.dom(b);a.children(".bubble.count").remove();if(a&&i){html=Lungo.Attributes.Data.count.html.replace(Lungo.Constants.BINDING.SELECTOR,i);a.append(html)}};Lungo.Element.loading=function(b,i){var a=Lungo.dom(b);if(a){var l=null;if(i)l=Lungo.Attributes.Data.loading.html.replace(Lungo.Constants.BINDING.SELECTOR,i);a.html(l)}};Lungo.Element.progress=function(b,i){var a=Lungo.dom(b);if(a){i+=Lungo.Constants.ATTRIBUTE.PERCENT;a.find(".value").style(Lungo.Constants.ATTRIBUTE.WIDTH,i)}};Lungo.Element.Pull=function(b,i){var a=0,l=false,g=$$(b),m=g.siblings('div[data-control="pull"]'),c;c=Lungo.Core.mix({onPull:"Pull down to refresh",onRelease:"Release to...",onRefresh:"Loading...",callback:undefined},i);var f=function(){h(0,true);setTimeout(function(){l=false;document.removeEventListener("touchmove",e,false)},300);a=0},h=function(j,o){var q=j>80?80:j;o&&g.addClass("pull");g.style("-webkit-transform","translate(0, "+q+"px)");o&&setTimeout(function(){g.removeClass("pull")},300)},d=
function(){l=true;document.addEventListener("touchmove",e,false);k(c.onRefresh);n(true);h(60,true);c.callback&&c.callback.apply(this)},k=function(j){m.find("strong").html(j)},n=function(j){j?m.addClass("refresh"):m.removeClass("refresh")},p=function(j){j?m.addClass("rotate"):m.removeClass("rotate")},e=function(j){j.preventDefault()};(function(){var j=false,o={};g.bind("touchstart",function(q){if(g[0].scrollTop<=1){j=true;o=$$.isMobile()?q.touches[0].pageY:q.pageY}}).bind("touchmove",function(q){if(!l&&
j){current_y=$$.isMobile()?q.touches[0].pageY:q.pageY;a=current_y-o;if(a>=0){g.style("overflow-y","hidden");h(a,false);n(false);if(a>60){k(c.onRelease);p(true)}else{k(c.onPull);p(false)}}}}).bind("touchend",function(){if(j){g.style("overflow-y","scroll");a>60?d():f()}INI_TOUCH={};j=false})})();return{hide:f}};Lungo.Data.Cache=function(b,i){var a={},l=function(m){return arguments.length===1?a[m]:a[arguments[0]]?a[arguments[0]][arguments[1]]:i},g=function(m){return a[m]?true:false};return{set:function(m,c){a[m]=g(m)?b.Core.mix(l(m),c):c},get:l,remove:function(m){if(arguments.length===1)delete a[m];else delete a[arguments[0]][arguments[1]]},exists:g}}(Lungo);Lungo.Data.Sql=function(b){var i=b.Constants.ERROR,a={name:"lungo_db",version:"1.0",size:65536,schema:[]},l=null,g=function(d,k){b.Core.log(1,"lng.Data.Sql >> "+d);l.transaction(function(n){n.executeSql(d,[],function(p,e){c(k,e)},function(p){p.executedQuery=d;h.apply(null,arguments)})})},m=function(d,k){var n="",p;for(p in d)if(b.Core.isOwnProperty(d,p)){var e=d[p];if(n)n+=" "+k+" ";n+=p+"=";n+=isNaN(e)?'"'+e+'"':e}return n},c=function(d,k){b.Core.toType(d)==="function"&&setTimeout(d,100,k)},f=function(d,
k){var n="",p="",e;for(e in k)if(b.Core.isOwnProperty(k,e)){var j=k[e];n+=n?", "+e:e;if(p)p+=", ";p+=isNaN(j)||j==""?'"'+j+'"':j}g("INSERT INTO "+d+" ("+n+") VALUES ("+p+")")},h=function(d,k){throw Error(i.DATABASE_TRANSACTION+k.code+": "+k.message+" \n Executed query: "+d.executedQuery);};return{init:function(d){a=b.Core.mix(a,d);if(l=openDatabase(a.name,a.version,a.name,a.size)){d=a.schema;var k=d.length;if(k)for(var n=0;n<k;n++){var p=d[n];p.drop===true&&g("DROP TABLE IF EXISTS "+p.name);var e=
p.name;p=p.fields;var j="",o=void 0;for(o in p)if(b.Core.isOwnProperty(p,o)){if(j)j+=", ";j+=o+" "+p[o]}g("CREATE TABLE IF NOT EXISTS "+e+" ("+j+");")}}else throw Error(i.DATABASE);},select:function(d,k,n){k=k?" WHERE "+m(k,"AND"):"";g("SELECT * FROM "+d+k,function(p){for(var e=[],j=0,o=p.rows.length;j<o;j++)e.push(p.rows.item(j));c(n,e)})},insert:function(d,k){if(b.Core.toType(k)==="object")f(d,k);else for(row in k)f(d,k[row])},update:function(d,k,n){d="UPDATE "+d+" SET "+m(k,",");if(n)d+=" WHERE "+
m(n,"AND");g(d)},drop:function(d,k){var n=k?" WHERE "+m(k,"AND"):"";g("DELETE FROM "+d+n+";")},execute:g}}(Lungo);Lungo.Data.Storage=function(){var b={PERSISTENT:"localStorage",SESSION:"sessionStorage"},i=function(a,l,g){a=window[a];if(g){a=a;g=g;g=JSON.stringify(g);a.setItem(l,g)}else if(g===null)a.removeItem(l);else{value=a.getItem(l);return JSON.parse(value)}};return{session:function(a,l){return i(b.SESSION,a,l)},persistent:function(a,l){return i(b.PERSISTENT,a,l)}}}(Lungo);Lungo.Attributes.Data={count:{selector:"*",html:'<span class="tag theme count">{{value}}</span>'},pull:{selector:"section",html:'<div class="{{value}}" data-control="pull" data-icon="down" data-loading="black">                    <strong>title</strong>                </div>'},progress:{selector:"*",html:'<div class="progress">                    <span class="bar"><span class="value" style="width:{{value}};"></span></span>                </div>'},label:{selector:"*",html:"<abbr>{{value}}</abbr>"},
icon:{selector:"*",html:'<span class="icon {{value}}"></span>'},image:{selector:"*",html:'<img src="{{value}}" class="icon" />'},title:{selector:"header",html:'<span class="title centered">{{value}}</span>'},loading:{selector:"*",html:'<div class="loading {{value}}">                    <span class="top"></span>                    <span class="right"></span>                    <span class="bottom"></span>                    <span class="left"></span>                </div>'},back:{selector:"header",
html:'<nav class="left"><a href="#back" data-router="section" class="left"><span class="icon {{value}}"></span></a></nav>'}};Lungo.Boot.Events=function(b){var i=b.Constants.ATTRIBUTE,a=b.Constants.ELEMENT,l={HREF_TARGET:"a[href][data-router]",HREF_TARGET_FROM_ASIDE:"aside a[href][data-router]",INPUT_CHECKBOX:"input[type=range].checkbox"},g=function(d){d.preventDefault();d=b.dom(this);d.data("async")?h(d):f(d)},m=function(d){d.preventDefault();b.View.Aside.hide()},c=function(d){d.preventDefault();d=b.dom(this);var k=d.val()>0?0:1;d.toggleClass("active").attr("value",k)},f=function(d){switch(d.data(i.ROUTER)){case a.SECTION:d=
d.attr(i.HREF);d=b.Core.parseUrl(d);d==="#back"?b.Router.back():b.Router.section(d);break;case a.ARTICLE:var k=b.Router.History.current(),n=d.attr(i.HREF);b.Router.article(k,n,d);break;case a.ASIDE:k=b.Router.History.current();d=d.attr(i.HREF);b.Router.aside(k,d)}},h=function(d){b.Notification.show();b.Resource.load(d.data("async"));d[0].removeAttribute("data-async");b.Boot.Data.init(d.attr(i.HREF));setTimeout(function(){f(d);b.Notification.hide()},b.Constants.TRANSITION.DURATION*2)};return{init:function(){b.dom(l.HREF_TARGET_FROM_ASIDE).tap(m);
b.dom(l.HREF_TARGET).tap(g);b.dom(l.INPUT_CHECKBOX).touch(c)}}}(Lungo);Lungo.Boot.Data=function(b){var i=b.Constants.BINDING,a=function(l,g){attribute=b.Attributes.Data[g];l.find(attribute.selector+"[data-"+g+"]").each(function(m,c){var f=b.dom(c),h=f.data(g);h=attribute.html.replace(i.START+i.KEY+i.END,h);f.prepend(h)})};return{init:function(l){l=b.dom(l||document.body);if(l.length>0)for(var g in b.Attributes.Data)b.Core.isOwnProperty(b.Attributes.Data,g)&&a(l,g)}}}(Lungo);Lungo.Boot.Layout=function(b){var i=b.Constants.ELEMENT,a=b.Constants.CLASS,l=b.Constants.ATTRIBUTE,g=b.Constants.QUERY,m=function(h,d){for(var k=b.dom(h),n=0,p=k.length;n<p;n++){var e=b.dom(k[n]);b.Core.execute(d,e)}},c=function(h){if(h.children().length===0){h.attr(l.ID);h.append(i.LIST)}},f=function(h){h[0].addEventListener("touchstart",function(){scrollTop=this.scrollTop;if(scrollTop<=1)this.scrollTop=1;if(scrollTop+this.offsetHeight>=this.scrollHeight)this.scrollTop=this.scrollHeight-this.offsetHeight-
1},false)};return{init:function(){b.Element.Cache.asides=b.dom(i.ASIDE);b.Fallback.fixPositionInAndroid();var h=b.dom(i.SECTION).first().addClass(a.SHOW);b.Element.Cache.section=h;b.Element.Cache.article=h.children(i.ARTICLE+"."+a.ACTIVE);h="#"+h.attr(l.ID);b.Router.History.add(h);m(g.LIST_IN_ELEMENT,c);m(g.ELEMENT_SCROLLABLE,f)}}}(Lungo);
